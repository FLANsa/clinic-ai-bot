# التحقق من بيانات قاعدة البيانات

## المشكلة
إذا كان البوت يظهر بيانات hard-coded بدلاً من البيانات من قاعدة البيانات، فهذا يعني:

1. **قاعدة البيانات فارغة** - لا توجد بيانات
2. **البيانات موجودة لكن الـ LLM لا يستخدمها** - تم إصلاحه في التحديث الأخير

## الحل

### 1. التحقق من وجود البيانات في قاعدة البيانات

#### في Render Dashboard:
1. اذهب إلى Database Dashboard
2. افتح **Data** أو **Tables**
3. تحقق من وجود بيانات في:
   - `doctors` - الأطباء
   - `services` - الخدمات
   - `branches` - الفروع
   - `offers` - العروض

#### أو استخدم API:
```bash
# التحقق من الأطباء
curl https://your-backend-url.onrender.com/admin/doctors/ \
  -H "X-API-Key: YOUR_ADMIN_API_KEY"

# التحقق من الخدمات
curl https://your-backend-url.onrender.com/admin/services/ \
  -H "X-API-Key: YOUR_ADMIN_API_KEY"

# التحقق من الفروع
curl https://your-backend-url.onrender.com/admin/branches/ \
  -H "X-API-Key: YOUR_ADMIN_API_KEY"
```

### 2. إضافة بيانات تجريبية

#### استخدام API:
```bash
# إضافة بيانات تجريبية
curl -X POST https://your-backend-url.onrender.com/admin/db/add-sample-data \
  -H "X-API-Key: YOUR_ADMIN_API_KEY"
```

#### أو من Frontend:
1. اذهب إلى صفحة Test Chat
2. اضغط **"إضافة بيانات تجريبية"**

### 3. التحقق من السجلات (Logs)

في Render Dashboard:
1. اذهب إلى **Logs**
2. ابحث عن:
   - `تم جلب X طبيب من قاعدة البيانات`
   - `تم جلب X خدمة من قاعدة البيانات`
   - `تم جلب X فرع من قاعدة البيانات`

إذا رأيت:
- `لا توجد أطباء في قاعدة البيانات` → قاعدة البيانات فارغة
- `تم جلب X طبيب` → البيانات موجودة

### 4. التحقق من System Prompt

البوت الآن يستخدم System Prompt محسّن يمنع اختراع المعلومات:
- ✅ يستخدم فقط البيانات من "معلومات متوفرة"
- ✅ يرفض الإجابة إذا لم تكن المعلومة موجودة
- ✅ لا يخترع أسماء أطباء أو خدمات

## بعد إضافة البيانات

1. أعد نشر الخدمة في Render (إذا لزم الأمر)
2. اختبر البوت:
   - "عندكم أطباء؟"
   - "وش الخدمات عندكم؟"
   - "وين فروعكم؟"

البوت يجب أن يرد بالبيانات من قاعدة البيانات فقط.


